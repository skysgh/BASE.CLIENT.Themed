<!-- Spike Browse - Uses BrowseView Component -->
<div class="spike-browse">
  
  <!-- Header: Title + Add -->
  <div class="browse-header mb-4">
    <div class="row align-items-center g-3">
      <div class="col">
        <h4 class="mb-0">
          <i class="bx bx-bulb me-2 text-primary"></i>
          {{'APPS.SPIKE.PLURAL' | baseTranslate}}
        </h4>
      </div>
      <div class="col-auto">
        <a routerLink="../add" class="btn btn-primary btn-sm">
          <i class="bx bx-plus me-1"></i>
          {{'BASE.ACTIONS.ADD' | baseTranslate}}
        </a>
      </div>
    </div>
  </div>

  <!-- BrowseView Component -->
  <app-browse-view
    [cards]="cards()"
    [columns]="columns"
    [fields]="fieldDefinitions"
    [loading]="loading()"
    [emptyMessage]="searchQuery ? 'No spikes match your search' : 'No spikes yet'"
    [emptyIcon]="'bx bx-bulb'"
    [showSearch]="true"
    [searchQuery]="searchQuery"
    [searchPlaceholder]="'Search spikes...'"
    [showFilterPanel]="true"
    [filters]="filters()"
    [showOrderPanel]="true"
    [sorts]="sorts()"
    [showDisplayPanel]="true"
    [viewMode]="viewMode"
    [chartDefinitions]="chartDefinitions"
    [selectedChartId]="selectedChartId"
    [page]="page()"
    [pageSize]="pageSize()"
    [totalCount]="totalCount()"
    (searchChange)="onSearchChange($event)"
    (searchClear)="onSearchClear()"
    (filtersChange)="onFiltersChange($event)"
    (sortsChange)="onSortsChange($event)"
    (apply)="onApply()"
    (viewModeChange)="setViewMode($event)"
    (chartDefinitionChange)="onChartDefinitionChange($event)"
    (pageChange)="onPageChange($event)"
    (cardClick)="onCardClick($event)"
    (cardAction)="onCardAction($event)">
    
    <!-- Empty state actions slot -->
    <ng-container emptyActions>
      @if (searchQuery) {
        <button class="btn btn-outline-primary mt-3" (click)="onSearchClear()">
          Clear Search
        </button>
      } @else {
        <a routerLink="../add" class="btn btn-primary mt-3">
          <i class="bx bx-plus me-1"></i>
          Create Spike
        </a>
      }
    </ng-container>
  </app-browse-view>
</div>


